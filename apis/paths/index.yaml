# import Data via csv/xlsx file
/import/data-import:
  post:
    tags:
      - Import
    summary: Import Data
    description: |-
      API to import data for specific model.
    requestBody:
      required: true
      content:
        multipart/form-data: # since you're uploading a file
          schema:
            type: object
            properties:
              modelName:
                type: string
                description: |
                  Name of model whose data is going to be imported.<br>
                  Accepted values: `'property', 'client', 'dossier'`
              file:
                type: string
                description: |
                  Accepted formats: `'csv', 'xls', 'xlsx'`.<br>
                  _Make sure file contains header and at least one row._
                # format: binary
            required:
              - modelName
              - file
    responses:
      '200':
        description: Successful import request
        content:
          application/json:
            schema:
              $ref: '../responses/importData.yaml'

# check import status
/import/import-status:
  get:
    security:
      - ApiKeyAuth: []
    tags:
      - Import
    summary: Check Import Status
    description: Check the progress and current state of an import by its ID.
    parameters:
      - name: importId
        required: true
        in: query
        description: 'The ID of the import job'
        schema:
          type: string
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              $ref: '../responses/importFormat.yaml'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

# Download Import Logs (Errors/Warnings)
/import/download-import-logs:
  get:
    tags:
      - Import
    summary: Download Import Logs (Errors/Warnings)
    description: 'Downloads a file containing warnings and errors encountered during the import process.'
    parameters:
      - name: importId
        in: query
        description: 'The ID of the import job'
        required: true
        schema:
          type: string
    responses:
      '200':
        description: Successful operation
        content:
          application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
            schema:
              type: string
              format: binary
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

# Available Property Types
/import/property-types:
  get:
    tags:
      - Lookups
    summary: Available property types
    description: |-
      Get list of available property types to be used in import file<br/>
      => If `parent_key` is null, then it's a main property type<br/>
      => If `parent_key` has a value, then it's a sub property type of the main type identified by `parent_key`
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../responses/propertyTypes.yaml'
            examples:
              sample:
                value:
                  - key: 136
                    value: Apartment
                    parent_key: null
                    parent_value: null
                  - key: 192
                    value: Duplex
                    parent_key: 136
                    parent_value: 'Apartment'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

# Available Property Types
/import/countries:
  get:
    tags:
      - Lookups
    summary: Available countries
    description: |-
      Get list of available countries to be used in import file
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../responses/propertyTypes.yaml'
            examples:
              sample:
                value:
                  - key: 136
                    value: Apartment
                    parent_key: null
                    parent_value: null
                  - key: 192
                    value: Duplex
                    parent_key: 136
                    parent_value: 'Apartment'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

/import/regions:
  get:
    tags:
      - Lookups
    summary: Available regions
    description: |-
      Get list of available regions to be used in import file
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../responses/propertyTypes.yaml'
            examples:
              sample:
                value:
                  - key: 136
                    value: Apartment
                    parent_key: null
                    parent_value: null
                  - key: 192
                    value: Duplex
                    parent_key: 136
                    parent_value: 'Apartment'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

/import/provinces:
  get:
    tags:
      - Lookups
    summary: Available provinces
    description: |-
      Get list of available provinces to be used in import file
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../responses/propertyTypes.yaml'
            examples:
              sample:
                value:
                  - key: 136
                    value: Apartment
                    parent_key: null
                    parent_value: null
                  - key: 192
                    value: Duplex
                    parent_key: 136
                    parent_value: 'Apartment'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

/import/cities:
  get:
    tags:
      - Lookups
    summary: Available cities
    description: |-
      Get list of available property types to be used in import file<br/>
      => If `parent_key` is null, then it's a main property type<br/>
      => If `parent_key` has a value, then it's a sub property type of the main type identified by `parent_key`
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../responses/propertyTypes.yaml'
            examples:
              sample:
                value:
                  - key: 136
                    value: Apartment
                    parent_key: null
                    parent_value: null
                  - key: 192
                    value: Duplex
                    parent_key: 136
                    parent_value: 'Apartment'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found

/import/nationalities:
  get:
    tags:
      - Lookups
    summary: Available nationalities
    description: |-
      Get list of available nationalities to be used in import file
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../responses/propertyTypes.yaml'
            examples:
              sample:
                value:
                  - key: 136
                    value: Apartment
                    parent_key: null
                    parent_value: null
                  - key: 192
                    value: Duplex
                    parent_key: 136
                    parent_value: 'Apartment'
      '400':
        description: Invalid ID supplied
      '404':
        description: Import log not found
